{"version":3,"sources":["components/auth/callback.js","components/auth/silentRenew.js","../../src/mfe/MfeBase.js","../../src/mfe/Mfe.js","../../src/mfe/MfeAuth.js","components/Home.js","components/Counter.js","components/CustomerDetails.js","components/Layout.js","App.js","index.js"],"names":["Callback","signinRedirectCallback","SilentRenew","signinSilentCallback","React","constructor","props","super","componentDidMount","scriptId","this","id","name","renderMicroFrontend","window","document","fetch","res","manifest","script","host","render","loading","len","checkLoading","timeout","elem","Me","setTimeout","renderLoading","Component","state","loader","history","data","events","token","getAccessToken","storage","oidcStorage","JSON","process","isAuthenticated","console","Loading","Home","displayName","Counter","CustomerDetails","customerId","showUpdateButton","onClick","alert","localStore","Layout","Container","className","to","children","App","logger","basename","exact","path","component","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.e26fa6a4.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { AuthConsumer } from \"@spekta/react-oidc\";\r\n\r\nexport const Callback = () => (\r\n    <AuthConsumer>\r\n        {({ signinRedirectCallback }) => {\r\n            signinRedirectCallback();\r\n            return <span>loading</span>;\r\n        }}\r\n    </AuthConsumer>\r\n);","import React from \"react\";\r\nimport { AuthConsumer } from \"@spekta/react-oidc\";\r\n\r\nexport const SilentRenew = () => (\r\n    <AuthConsumer>\r\n        {({ signinSilentCallback }) => {\r\n            signinSilentCallback();\r\n            return <span>loading</span>;\r\n        }}\r\n    </AuthConsumer>\r\n);","import React, { Component } from 'react'\r\n\r\nexport class MfeBase extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const scriptId = `micro-frontend-script-${this.props.name}`;\r\n        const id = !this.props.id ? this.props.name + \"-container\"  : this.props.id;\r\n\r\n        const renderMicroFrontend = () => {\r\n            window[\"render\" + this.props.name](id, this.props.history, this.props.data, this.props.events, this.props.token);\r\n        };\r\n\r\n        if (document.getElementById(scriptId)) {\r\n            renderMicroFrontend();\r\n            return;\r\n        }\r\n\r\n        fetch(`${this.props.host}/asset-manifest.json`)\r\n            .then((res) => res.json())\r\n            .then((manifest) => {\r\n                const script = document.createElement(\"script\");\r\n                script.id = scriptId;\r\n                script.crossOrigin = \"\";\r\n                script.src = `${this.props.host}${manifest.files[\"main.js\"]}`;\r\n                script.onload = () => {\r\n                    renderMicroFrontend();\r\n                };\r\n                document.head.appendChild(script);\r\n            });\r\n\r\n        return () => {\r\n            window[\"unmount\" + this.props.name] && window[\"unmount\" + this.props.name](id);\r\n\r\n        };\r\n    };\r\n\r\n    render() {\r\n\r\n        const id = !this.props.id ? this.props.name + \"-container\"  : this.props.id;\r\n\r\n        return (\r\n            <main id={id} />\r\n        );\r\n    };\r\n}","import React, { Component, Fragment } from 'react'\r\nimport { MfeBase } from './MfeBase'\r\n\r\nexport class Mfe extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            len: 0\r\n        }\r\n        this.checkLoading();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.checkLoading(500);\r\n    }\r\n\r\n    checkLoading(timeout) {\r\n        const id = !this.props.id ? this.props.name + \"-container\" : this.props.id;\r\n        const elem = document.getElementById(id)\r\n\r\n        if (elem && elem.childNodes.length > 0) {\r\n            this.setState({ ...this.state, loading: false, len: timeout })\r\n        }\r\n        else {\r\n            var Me = this;\r\n            setTimeout(() => {\r\n                Me.checkLoading(timeout);\r\n            }, timeout);\r\n        }\r\n    }\r\n\r\n    renderLoading(Component) {\r\n        if (!!Component && this.state.loading) {\r\n            return <Component />\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    render() {\r\n        const loading = this.renderLoading(this.props.loading)\r\n        let loader = this.state.loading\r\n            ? loading\r\n            : null\r\n\r\n        return (\r\n            <Fragment>\r\n                {loader}\r\n                <MfeBase id={this.props.id} history={this.props.history} host={this.props.host} name={this.props.name} data={this.props.data} events={this.props.events} token={this.props.token} />\r\n            </Fragment>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { AuthConsumer } from \"@spekta/react-oidc\";\r\nimport { Mfe } from \"./Mfe\";\r\n\r\nexport  class MfeAuth extends Component {\r\n\r\n    getAccessToken() {\r\n        const storage = !!this.props.localStore ? localStorage : sessionStorage;\r\n        const oidcStorage = JSON.parse(storage.getItem(`oidc.user:${process.env.REACT_APP_OIDC_AUTHORITY}:${process.env.REACT_APP_OIDC_CLIENT_ID}`))\r\n        if (!!oidcStorage && !!oidcStorage.access_token) {\r\n            return oidcStorage.access_token;\r\n        }\r\n\r\n        return \"\";\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <AuthConsumer>\r\n                {({ isAuthenticated }) => {\r\n                    const token = this.getAccessToken();\r\n                    console.log(\"ACCESS TOK\");\r\n                    console.log(token);\r\n                    if (isAuthenticated()) {\r\n                        return <Mfe history={this.props.history} host={this.props.host} name={this.props.name} data={this.props.data} events={this.props.events} loading={this.props.loading} token={token} />;\r\n                    }\r\n                    else {\r\n                        return null\r\n                    }\r\n                }}\r\n            </AuthConsumer>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Mfe } from \"@spekta/react-mfe\";\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <span>Loading...</span>\r\n    );\r\n};\r\n\r\nexport class Home extends Component {\r\n    static displayName = Home.name;\r\n    render() {\r\n        return (\r\n            <div id=\"profile-partial-service\">\r\n                <Mfe id=\"homepage\" name=\"Test\" host={process.env.REACT_APP_MFE_RESOURCE} loading={Loading} />\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { Mfe } from \"@spekta/react-mfe\";\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <span>Loading...</span>\r\n    );\r\n};\r\n\r\nexport class Counter extends Component {\r\n    static displayName = Counter.name;\r\n    render() {\r\n        return (\r\n            <div id=\"profile-partial-service\">\r\n                <Mfe id=\"counter\" name=\"Counter\" host={process.env.REACT_APP_MFE_RESOURCE} loading={Loading} />\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { MfeAuth } from \"@spekta/react-mfe\";\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <span>Loading...</span>\r\n    );\r\n};\r\n\r\nexport class CustomerDetails extends Component {\r\n    static displayName = CustomerDetails.name;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: {\r\n                customerId: 1,\r\n                showUpdateButton: true\r\n            },\r\n\r\n            events: {\r\n                onClick: this.onClick\r\n            }\r\n\r\n        };\r\n    }\r\n\r\n\r\n    onClick() {\r\n        alert(\"onClick\");\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MfeAuth name=\"CustomerDetails\" host={process.env.REACT_APP_MFE_RESOURCE} data={this.state.data} events={this.state.events} localStore={true} loading={Loading} />\r\n        );\r\n    }\r\n\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container } from 'reactstrap';\r\nimport '../index.css';\r\n\r\nexport const Layout = props => {\r\n\r\n    return (\r\n        <>\r\n            <Container>\r\n                <div className=\"menu\">\r\n                    <div className=\"menu-item\">\r\n                          <Link to=\"/\">Home</Link>              \r\n                    </div>\r\n                    <div className=\"menu-item\">\r\n                          <Link to=\"/counter\">Counter</Link>              \r\n                    </div>\r\n                    <div className=\"menu-item\">\r\n                          <Link to=\"/customer\">Customer</Link>              \r\n                    </div>\r\n                </div>\r\n            </Container>\r\n            <Container>\r\n                {props.children}\r\n            </Container>\r\n        </>\r\n    );\r\n\r\n}","import React from 'react'\r\nimport { AuthProvider, AuthRoute } from \"@spekta/react-oidc\";\r\nimport { Callback } from './components/auth/callback';\r\nimport { SilentRenew } from './components/auth/silentRenew';\r\nimport { Home } from './components/Home';\r\nimport { Counter } from './components/Counter';\r\nimport { CustomerDetails } from './components/CustomerDetails';\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\nimport { Layout } from './components/Layout';\r\n\r\n//import '@spekta/react-mfe/dist/index.css'\r\n\r\nconst App = () => {\r\n  return (\r\n    <AuthProvider logger={console}>\r\n      <BrowserRouter basename={\"/\"} >\r\n        <Layout>\r\n          <Route exact={true} path=\"/signin-oidc\" component={Callback} />\r\n          <Route exact={true} path=\"/silentRenew\" component={SilentRenew} />\r\n          <Route exact path=\"/\" component={Home} />\r\n          <Route exact path=\"/counter\" component={Counter} />\r\n          <AuthRoute exact path=\"/customer\" component={CustomerDetails} />\r\n        </Layout>\r\n      </BrowserRouter>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App\r\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}